{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./lib/Editor.js","webpack:///./lib/features/zoom/index.js","webpack:///./lib/features/zoom/Zoom.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;ACVA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;;AAEA,mBAAkB;;AAElB;AACA,6BAA4B;AAC5B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,G;;;;;;;ACrCA;AACA;AACA;AACA,G;;;;;;;ACHA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,UAAU;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;;AAER;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,G","file":"D3P.Editor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"D3P\"] = factory();\n\telse\n\t\troot[\"D3P\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","'use strict';\r\n\r\nvar inherits = require('inherits');\r\n\r\nvar Viewer = require('./Viewer').Viewer;\r\n\r\n\r\n/**\r\n * An editor for node networks\r\n *\r\n * @param {Object} options\r\n */\r\nfunction Editor(options) {\r\n  Viewer.call(this, options);\r\n}\r\n\r\ninherits(Editor, Viewer);\r\n\r\nmodule.exports = {Editor: Editor};\r\n\r\nEditor.prototype.createDiagram = function(){\r\n  return this.importNodes({});\r\n};\r\n\r\nEditor.prototype._interactionModules = [\r\n  require('./features/zoom')\r\n  //require('./features/tooltip')\r\n];\r\n\r\nEditor.prototype._editionModules = [\r\n  //require('./features/palette')\r\n];\r\n\r\nEditor.prototype._modules = [].concat(\r\n  Editor.prototype._modules,\r\n  Editor.prototype._interactionModules,\r\n  Editor.prototype._editionModules\r\n);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/Editor.js\n// module id = 1\n// module chunks = 0","module.exports = {\r\n  __init__: [ 'zoom' ],\r\n  zoom: [ 'type', require('./Zoom') ]\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/features/zoom/index.js\n// module id = 757\n// module chunks = 0 1","'use strict';\r\n\r\nvar d3 = require('d3'),\r\n  isUndefined = require('lodash/lang').isUndefined,\r\n  _isZoomable = false,\r\n  _zoom = null\r\n  ;\r\n\r\n/**\r\n * The zoom functionality.\r\n *\r\n * @class\r\n * @constructor\r\n *\r\n * @param {Object} options\r\n * @param {Canvas} canvas\r\n * @param {GridLines} gridLines\r\n */\r\nfunction Zoom(options, canvas, eventBus) {\r\n  this._canvas = canvas;\r\n  this._eventBus = eventBus;\r\n\r\n  init.apply(this, [options.translateX, options.translateY, options.scale]);\r\n\r\n  this.setZoomable(!!options.isZoomable);\r\n  this.setZoom(options.translateX, options.translateY, options.scale, options.scale);\r\n}\r\n\r\nZoom.$inject = [ 'd3polytree.options', 'canvas', 'eventBus' ];\r\n\r\nmodule.exports = Zoom;\r\n\r\nZoom.prototype.setZoom = function(translateX, translateY, scale){\r\n  if (_isZoomable === true) {\r\n    console.log('setZoom');\r\n    var currentTransform = this._canvas.getTransform(),\r\n      deltaX,\r\n      deltaY\r\n      ;\r\n\r\n    translateX = !isUndefined(translateX) ? translateX : currentTransform.e;\r\n\r\n    translateY = !isUndefined(translateY) ? translateY : currentTransform.f;\r\n\r\n    scale = !isUndefined(scale) ? scale : currentTransform.a;\r\n\r\n    deltaX = translateX - currentTransform.e;\r\n    deltaY = translateY - currentTransform.f;\r\n\r\n    // apply transform\r\n    this._canvas.getDrawingLayer()\r\n      .attr('transform', 'translate(' + translateX + ', ' + translateY + ') scale(' + scale + ')');\r\n\r\n    this._eventBus.fire('canvas.zoomed', deltaX, deltaY);\r\n  }\r\n};\r\n\r\nZoom.prototype.setZoomable = function(isZoomable){\r\n  _isZoomable = isZoomable;\r\n};\r\n\r\nvar init = function(tX, tY, s){\r\n  var drawingLayer = this._canvas.getDrawingLayer();\r\n  var that = this;\r\n  _zoom = d3\r\n    .zoom()\r\n    .scaleExtent([0.01, 10])\r\n    .on('zoom', function(){\r\n      if (!_isZoomable) return true;\r\n      // on zoom event\r\n      var trans = d3.event.transform;\r\n      that.setZoom(trans.x, trans.y, trans.k);\r\n    });\r\n\r\n  // var drag = d3\r\n  //   .drag()\r\n  //   .on('drag', function(){\r\n  //     if (!_isZoomable) return true;\r\n  //     // on zoom event\r\n  //     var trans = d3.event,\r\n  //       svgTrans = that._canvas.getTransform();\r\n  //     console.log('ondrag');\r\n  //     drawingLayer\r\n  //       .call(_zoom.transform, d3.zoomIdentity\r\n  //         .translate(svgTrans.e + trans.dx, svgTrans.f + trans.dy)\r\n  //         .scale(svgTrans.a));\r\n  //     that._eventBus.fire('canvas.dragged');\r\n  //   });\r\n\r\n  drawingLayer = drawingLayer\r\n\r\n    .call(_zoom)\r\n    .call(_zoom.transform, d3.zoomIdentity\r\n      .translate(tX, tY)\r\n      .scale(s))\r\n    //.call(drag)\r\n    .append('g');\r\n\r\n  this._canvas.setDrawingLayer(drawingLayer);\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/features/zoom/Zoom.js\n// module id = 758\n// module chunks = 0 1"],"sourceRoot":""}